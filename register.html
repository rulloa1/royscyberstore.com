<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register | RoysCompany</title>
    <!-- Base URL for assets -->
    <!-- Removed by WebCopy --><!--<base href="/public">--><!-- Removed by WebCopy -->

    <!-- Link to external stylesheets or fonts if needed -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">

    <style>
        body {
            /* Modern gradient background instead of image */
            background: linear-gradient(135deg, #0f0f0f 0%, #1a1a1a 25%, #2d1b1e 50%, #1a1a1a 75%, #0f0f0f 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            font-family: 'Poppins', sans-serif; /* Modern font style */
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            overflow: hidden;
        }
        
        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Rotating animation for background elements */
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .rotating-bg {
            position: absolute;
            width: 150px;
            height: 150px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            animation: rotate 10s linear infinite;
            top: 20%;
            left: 20%;
        }

        .rotating-bg:nth-child(2) {
            width: 250px;
            height: 250px;
            top: 70%;
            left: 60%;
            animation-duration: 15s;
        }

        .rotating-bg:nth-child(3) {
            width: 120px;
            height: 120px;
            top: 30%;
            left: 75%;
            animation-duration: 12s;
        }

        .registration-box {
            background: rgba(255, 255, 255, 0.85); /* Semi-transparent background */
            backdrop-filter: blur(15px); /* Blurred background effect */
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            width: 400px;
            max-width: 90%;
            position: relative;
            z-index: 2;
            animation: fadeIn 1s ease-out forwards;
        }

        /* Fade-in animation for the registration box */
        @keyframes fadeIn {
            0% {
                opacity: 0;
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        /* Input fields styling */
        .text, .input {
            background: rgba(255, 255, 255, 0.6);
            border: 1px solid #ddd;
            padding: 15px;
            margin-bottom: 15px;
            width: 100%;
            color: #333;
            border-radius: 8px;
            box-sizing: border-box;
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .text:focus, .input:focus {
            border-color: #DC2625; /* Modern red theme focus color */
        }

        /* Pulsating button animation */
        @keyframes pulsate {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        /* Submit button - Modern Theme */
        input[type="submit"] {
            background: linear-gradient(135deg, #DC2625 0%, #EF4444 100%);
            color: #fff;
            padding: 15px;
            border: none;
            width: 100%;
            cursor: pointer;
            border-radius: 15px;
            font-weight: 700;
            font-size: 1.1rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 20px 25px -5px rgba(220, 38, 37, 0.1), 0 10px 10px -5px rgba(220, 38, 37, 0.04);
            position: relative;
            overflow: hidden;
        }

        input[type="submit"]:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 25px 35px -5px rgba(220, 38, 37, 0.3);
        }

        input[type="submit"]:active {
            transform: translateY(-1px) scale(0.98);
        }

        /* Additional text and link styling */
        p {
            text-align: center;
            margin-top: 15px;
            font-size: 14px;
            color: #555;
        }

        a {
            color: #DC2625;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Logo styling */
        .logo-container {
            text-align: center;
            margin-bottom: 20px;
        }

        .logo-container img {
            width: 100px;
            height: auto;
        }

        /* Error message styling */
        .error-message {
            color: #DC2625;
            font-size: 12px;
            margin: -10px 0 10px 0;
            text-align: left;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .error-message.show {
            opacity: 1;
        }

        /* Success message styling */
        .success-message {
            background: linear-gradient(135deg, #16a34a 0%, #22c55e 100%);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            text-align: center;
            animation: slideInDown 0.5s ease-out;
        }

        @keyframes slideInDown {
            0% {
                transform: translateY(-30px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Input error state */
        .input-error {
            border-color: #DC2625 !important;
            box-shadow: 0 0 0 3px rgba(220, 38, 37, 0.1) !important;
        }

        /* Loading state for submit button */
        .loading {
            position: relative;
            color: transparent !important;
        }

        .loading::after {
            content: "";
            position: absolute;
            width: 20px;
            height: 20px;
            top: 50%;
            left: 50%;
            margin-left: -10px;
            margin-top: -10px;
            border: 2px solid transparent;
            border-top: 2px solid #ffffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Rotating background elements for unique animation -->
    <div class="rotating-bg"></div>
    <div class="rotating-bg"></div>
    <div class="rotating-bg"></div>

    <!-- Registration form -->
    <div class="registration-box">
        <div class="logo-container">
            <!-- Placeholder for logo -->
        </div>
        <h3>RoysCompany REGISTRATION PAGE</h3>
        <div class="form-info">
            <!-- Laravel session status and validation errors -->
            
            
            <!-- Registration form -->
            <form id="registrationForm" method="POST" onsubmit="handleRegistration(event)">
                <!-- Username input -->
                <input class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm text" id="name" placeholder="Username" type="text" name="name" required="required" autofocus="autofocus" minlength="3">
                <div id="nameError" class="error-message"></div>

                <!-- Email input -->
                <input class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm text" id="email" placeholder="Email Address" type="email" name="email" required="required">
                <div id="emailError" class="error-message"></div>

                <!-- Password input -->
                <input class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm input" id="password" placeholder="Password" type="password" name="password" required="required" autocomplete="new-password" minlength="6">
                <div id="passwordError" class="error-message"></div>

                <!-- Confirm Password input -->
                <input class="border-gray-300 focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50 rounded-md shadow-sm input" id="password_confirmation" placeholder="Confirm Password" type="password" name="password_confirmation" required="required" autocomplete="new-password">
                <div id="confirmPasswordError" class="error-message"></div>

                <!-- Submit button -->
                <input type="submit" id="registerButton" name="register" value="Register">
                
                <!-- Success message -->
                <div id="successMessage" class="success-message" style="display: none;">
                    <p>Registration successful! Redirecting to RoysCompany...</p>
                </div>

                <!-- Login link -->
                <p><a href="login.html">Account Login</a></p>
            </form>
        </div>
    </div>

    <script>
        // Form validation and registration handling
        function handleRegistration(event) {
            event.preventDefault();
            
            // Clear previous errors
            clearErrors();
            
            // Get form data
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('password_confirmation').value;
            
            // Validation flags
            let isValid = true;
            
            // Validate username
            if (name.length < 3) {
                showError('nameError', 'Username must be at least 3 characters long');
                setInputError('name');
                isValid = false;
            } else if (!/^[a-zA-Z0-9_]+$/.test(name)) {
                showError('nameError', 'Username can only contain letters, numbers, and underscores');
                setInputError('name');
                isValid = false;
            }
            
            // Validate email
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailRegex.test(email)) {
                showError('emailError', 'Please enter a valid email address');
                setInputError('email');
                isValid = false;
            }
            
            // Validate password
            if (password.length < 6) {
                showError('passwordError', 'Password must be at least 6 characters long');
                setInputError('password');
                isValid = false;
            } else if (!/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(password)) {
                showError('passwordError', 'Password must contain at least one lowercase letter, one uppercase letter, and one number');
                setInputError('password');
                isValid = false;
            }
            
            // Validate password confirmation
            if (password !== confirmPassword) {
                showError('confirmPasswordError', 'Passwords do not match');
                setInputError('password_confirmation');
                isValid = false;
            }
            
            // Check if user already exists (simulate local storage check)
            if (isValid && isUserExists(email)) {
                showError('emailError', 'An account with this email already exists');
                setInputError('email');
                isValid = false;
            }
            
            if (isValid) {
                // Simulate registration process
                processRegistration(name, email, password);
            }
        }
        
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.classList.add('show');
        }
        
        function clearErrors() {
            const errorElements = document.querySelectorAll('.error-message');
            errorElements.forEach(element => {
                element.textContent = '';
                element.classList.remove('show');
            });
            
            // Remove error styling from inputs
            const inputs = document.querySelectorAll('input[type="text"], input[type="email"], input[type="password"]');
            inputs.forEach(input => {
                input.classList.remove('input-error');
            });
        }
        
        function setInputError(inputId) {
            document.getElementById(inputId).classList.add('input-error');
        }
        
        function isUserExists(email) {
            // Check localStorage for existing users (simulate database check)
            const users = JSON.parse(localStorage.getItem('royscompany_users') || '[]');
            return users.some(user => user.email.toLowerCase() === email.toLowerCase());
        }
        
        function processRegistration(name, email, password) {
            const submitButton = document.getElementById('registerButton');
            
            // Show loading state
            submitButton.classList.add('loading');
            submitButton.disabled = true;
            
            // Simulate API call delay
            setTimeout(() => {
                // Store user data locally
                const users = JSON.parse(localStorage.getItem('royscompany_users') || '[]');
                const newUser = {
                    id: Date.now(),
                    name: name,
                    email: email,
                    password: hashPassword(password), // Simple hash for demo
                    registeredAt: new Date().toISOString(),
                    balance: 0.00
                };
                
                users.push(newUser);
                localStorage.setItem('royscompany_users', JSON.stringify(users));
                
                // Set current user session
                sessionStorage.setItem('royscompany_current_user', JSON.stringify({
                    id: newUser.id,
                    name: newUser.name,
                    email: newUser.email,
                    balance: newUser.balance
                }));
                
                // Show success message
                document.getElementById('successMessage').style.display = 'block';
                
                // Hide form
                document.getElementById('registrationForm').style.opacity = '0.5';
                
                // Set flag to show welcome message on main page
                sessionStorage.setItem('showWelcomeMessage', 'true');
                
                // Redirect to main website after 2 seconds
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 2000);
                
            }, 1500); // Simulate 1.5 second API call
        }
        
        // Simple password hashing (for demo purposes only)
        function hashPassword(password) {
            let hash = 0;
            for (let i = 0; i < password.length; i++) {
                const char = password.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash; // Convert to 32bit integer
            }
            return hash.toString();
        }
        
        // Real-time validation
        document.addEventListener('DOMContentLoaded', function() {
            // Add real-time validation for better UX
            const inputs = ['name', 'email', 'password', 'password_confirmation'];
            
            inputs.forEach(inputId => {
                const input = document.getElementById(inputId);
                input.addEventListener('blur', function() {
                    validateSingleField(inputId);
                });
                
                input.addEventListener('input', function() {
                    // Clear error when user starts typing
                    const errorElement = document.getElementById(inputId + 'Error');
                    if (errorElement.classList.contains('show')) {
                        errorElement.classList.remove('show');
                        input.classList.remove('input-error');
                    }
                });
            });
        });
        
        function validateSingleField(fieldId) {
            const field = document.getElementById(fieldId);
            const value = field.value.trim();
            
            switch(fieldId) {
                case 'name':
                    if (value && value.length < 3) {
                        showError('nameError', 'Username must be at least 3 characters long');
                        setInputError('name');
                    } else if (value && !/^[a-zA-Z0-9_]+$/.test(value)) {
                        showError('nameError', 'Username can only contain letters, numbers, and underscores');
                        setInputError('name');
                    }
                    break;
                    
                case 'email':
                    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if (value && !emailRegex.test(value)) {
                        showError('emailError', 'Please enter a valid email address');
                        setInputError('email');
                    }
                    break;
                    
                case 'password':
                    if (value && value.length < 6) {
                        showError('passwordError', 'Password must be at least 6 characters long');
                        setInputError('password');
                    }
                    break;
                    
                case 'password_confirmation':
                    const password = document.getElementById('password').value;
                    if (value && value !== password) {
                        showError('confirmPasswordError', 'Passwords do not match');
                        setInputError('password_confirmation');
                    }
                    break;
            }
        }
    </script>
</body>
</html>
